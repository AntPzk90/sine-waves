/*!
 _______ _____ __   _ _______      _  _  _ _______ _    _ _______ _______
 |______   |   | \  | |______      |  |  | |_____|  \  /  |______ |______
 ______| __|__ |  \_| |______      |__|__| |     |   \/   |______ ______|

 sine-waves v0.2.0-alpha <https://github.com/isuttell/sine-waves>
 Contributor(s): Isaac Suttell <isaac@isaacsuttell.com>
 Last Build: 2014-12-01
*/
!function(a,b){"use strict";"function"==typeof define&&"object"==typeof define.amd?define([],function(){return b(a)}):a.SineWaves=b(a)}(this,function(){"use strict";function a(a,b){g(b,"object")||(b={});for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function SineWaves(b){if(b=a(i,b),this.el=b.el,!this.el)throw"No Canvas Selected";if(this.ctx=this.el.getContext("2d"),this.waves=b.waves,!this.waves||!this.waves.length)throw"No waves specified";this.dpr=window.devicePixelRatio||1,this._width=b.width,this._height=b.height,this._wavesWidth=b.wavesWidth,this.resizeEvent=b.resizeEvent,this.initialize=b.initialize,this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this)),this.setupUserFunctions(),this.speed=b.speed,this.easeFn=h(k,b.ease,"Linear"),this.rotation=p(b.rotate),this.loop()}function b(a,b){return g(a,"number")?a:(a=a.toString(),a.indexOf("%")>-1?(a=parseFloat(a),a>1&&(a/=100),b*a):a.indexOf("px")>-1?parseInt(a,10):void 0)}function c(a){return g(Math.sign,"function")?Math.sign(a):(a=+a,0===a||isNaN(a)?a:a>0?1:-1)}Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e});for(var d=["ms","moz","webkit","o"],e=0;e<d.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[d[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[d[e]+"CancelAnimationFrame"]||window[d[e]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame){var f=0;window.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-f)),d=window.setTimeout(function(){a(b+c)},c);return f=b+c,d}}window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});var g=function(a,b){var c={}.toString.call(a).toLowerCase();return c==="[object "+b.toLowerCase()+"]"},h=SineWaves.prototype.getFn=function(a,b,c){return g(b,"function")?b:g(b,"string")&&g(a[b],"function")?a[b]:a[c]};SineWaves.prototype.setupUserFunctions=function(){g(this.resizeEvent,"function")&&(this.resizeEvent.call(this),window.addEventListener("resize",this.resizeEvent.bind(this))),g(this.initialize,"function")&&this.initialize.call(this)};var i={speed:10,rotate:0,ease:"Linear",wavesWidth:"95%"},j={timeModifier:1,amplitude:50,wavelength:50,segmentLength:10,lineWidth:1,strokeStyle:"rgba(255, 255, 255, 0.2)",type:"Sine"};SineWaves.prototype.updateDimensions=function(){var a,c;a=g(this._width,"number")?this._width:g(this._width,"function")?this._width.call(this,this.el):this.el.clientWidth,c=g(this._height,"number")?this._height:g(this._height,"function")?this._height.call(this,this.el):this.el.clientHeight,this.width=this.el.width=a*this.dpr,this.height=this.el.height=c*this.dpr,this.el.style.width=a+"px",this.el.style.height=c+"px",this.waveWidth=b(this._wavesWidth,this.width),this.waveLeft=(this.width-this.waveWidth)/2,this.yAxis=this.height/2},SineWaves.prototype.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},SineWaves.prototype.time=0,SineWaves.prototype.update=function(a){this.time=this.time-.007,"undefined"==typeof a&&(a=this.time);var b=-1,c=this.waves.length;for(this.ctx.save(),this.rotation>0&&(this.ctx.translate(this.width/2,this.height/2),this.ctx.rotate(this.rotation),this.ctx.translate(-this.width/2,-this.height/2));++b<c;){var d=this.waves[b].timeModifier||1;this.drawWave(a*d,this.waves[b])}this.ctx.restore(),b=void 0,c=void 0};var k=SineWaves.prototype.Ease={},l=2*Math.PI,m=Math.PI/2;SineWaves.prototype.Ease.Linear=function(a,b){return b},SineWaves.prototype.Ease.SineIn=function(a,b){return b*(Math.sin(a*Math.PI-m)+1)*.5},SineWaves.prototype.Ease.SineOut=function(a,b){return b*(Math.sin(a*Math.PI+m)+1)*.5},SineWaves.prototype.Ease.SineInOut=function(a,b){return b*(Math.sin(a*l-m)+1)*.5};var n=SineWaves.prototype.Waves={};SineWaves.prototype.Waves.Sine=function(a){return Math.sin(a)},SineWaves.prototype.Waves.Square=function(a){return c(Math.sin(a*l))},SineWaves.prototype.Waves.Sawtooth=function(a){return a-Math.floor(a+.5)},SineWaves.prototype.Waves.Triangle=function(a){return Math.abs(n.Sawtooth(a))},SineWaves.prototype.getPoint=function(a,b,c){var d=a*this.speed+(-this.yAxis+b)/c.wavelength,e=c.waveFn(d),f=this.easeFn(b/this.waveWidth,c.amplitude);return d=b+this.waveLeft,e=f*e+this.yAxis,{x:d,y:e}};var o=Math.PI/180,p=SineWaves.prototype.degreesToRadians=function(a){if(!g(a,"number"))throw new TypeError("Degrees is not a number");return a*o};return SineWaves.prototype.drawWave=function(b,c){c=a(j,c),c.waveFn=h(n,c.type,"Sine"),this.ctx.lineWidth=c.lineWidth*this.dpr,this.ctx.strokeStyle=c.strokeStyle,this.ctx.lineCap="butt",this.ctx.lineJoin="round",this.ctx.beginPath(),this.ctx.moveTo(0,this.yAxis),this.ctx.lineTo(this.waveLeft,this.yAxis);var d,e;for(d=0;d<this.waveWidth;d+=c.segmentLength)e=this.getPoint(b,d,c),this.ctx.lineTo(e.x,e.y),e=void 0;d=void 0,this.ctx.lineTo(this.width,this.yAxis),this.ctx.stroke()},SineWaves.prototype.running=!0,SineWaves.prototype.loop=function(){this.running===!0&&(this.clear(),this.update()),window.requestAnimationFrame(this.loop.bind(this))},SineWaves});
